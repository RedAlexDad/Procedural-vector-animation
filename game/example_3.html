<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>HTML5</title>
  <!--[if IE]>
   <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <style>
   article, aside, details, figcaption, figure, footer,header,
   hgroup, menu, nav, section { display: block; }
  </style>
 </head>
 <body>
  <canvas id="canvas" width="800px" height="600px" style="border: 2px solid red;"></canvas>
 </body>
 <script>
    const canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d");

    // Загрузка изображения космического корабля
    const spaceship = new Image();
    spaceship.src = 'spacecraft.gif';
    // Ширина корабля
    spaceship.width = 90; 
    // Высота корабля
    spaceship.height = 30; 

    function animateStackySpaceCraft() {
        // Начальная позиция корабля по вертикали
        let SpaceCraftY = canvas.height / 2; 
        // Высота корабля
        const SpaceCraftHeight = spaceship.height; 

        // Массив для хранения препятствий
        let obstacles = []; 

        function drawSpaceCraft(y) {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Отрисовка космического корабля
            ctx.drawImage(spaceship, canvas.width / 4 - spaceship.width / 2, y - SpaceCraftHeight / 2, spaceship.width, SpaceCraftHeight);
        }

        function drawObstacles() {
            ctx.fillStyle = "green";
            for (let obstacle of obstacles) {
                ctx.fillRect(obstacle.x, obstacle.y, obstacle.width, obstacle.height);
            }
        }

        function updateSpaceCraft(event) {
            // Обновление позиции птицы по вертикали
            SpaceCraftY = event.clientY - canvas.getBoundingClientRect().top; 
        }

        function updateObstacles() {
            for (let obstacle of obstacles) {
                // Скорость движения препятствий влево
                obstacle.x -= 5; 
            }

            if (Math.random() < 0.02) {
                let obstacleHeight = Math.random() * 100 + 50;
                let gapHeight = 150;
                obstacles.push({
                    x: canvas.width,
                    y: 0,
                    width: 20,
                    height: obstacleHeight
                });
                // Генерация новых препятствий с определенной вероятностью
                obstacles.push({
                    x: canvas.width,
                    y: obstacleHeight + gapHeight,
                    width: 20,
                    height: canvas.height - obstacleHeight - gapHeight
                }); 
            }

            // Удаление препятствий, вышедших за пределы холста
            obstacles = obstacles.filter(obstacle => obstacle.x + obstacle.width > 0); 
        }

        function checkCollision() {
            for (let obstacle of obstacles) {
                if (
                    SpaceCraftY - SpaceCraftHeight / 2 < obstacle.y + obstacle.height &&
                    SpaceCraftY + SpaceCraftHeight / 2 > obstacle.y &&
                    canvas.width / 4 + spaceship.width / 2 > obstacle.x &&
                    canvas.width / 4 - spaceship.width / 2 < obstacle.x + obstacle.width
                ) {
                    // Проверка столкновения птицы с препятствием
                    resetGame();
                }
            }
        }

        function resetGame() {
            SpaceCraftY = canvas.height / 2;
            obstacles = [];
        }

        function animate() {
            updateObstacles();
            checkCollision();
            drawSpaceCraft(SpaceCraftY);
            drawObstacles();
        }

        // Обработчик движения мыши
        canvas.addEventListener("mousemove", updateSpaceCraft); 

         // Запуск анимации с интервалом 16 миллисекунд
        setInterval(animate, 16);
    }

    animateStackySpaceCraft();
</script>




</html>